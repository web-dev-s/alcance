{"version":3,"sources":["client/client.css","client/pago.js"],"names":["module","exports","container","listItem","span","connect","state","userType","auth","userToken","showUserInfo","al","dispatch","onGetPendingPayments","token","actions","type","a","data","in_Token","onApprovePendingPayment","code","in_Code","withErrorHandler","props","_useWindowDimensions","useWindowDimensions","height","width","_useState","userId","useState","_useState2","Object","C_Users_D_Documents_alcance_gitHubAlcance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","checkTime","setCheckTime","_useState3","_useState4","stopChecking","setStopChecking","_useState5","_useState6","pendingPayment","setPendingPayment","_useState7","_useState8","openDialog","setOpenDialog","useEffect","interval","setInterval","Date","now","clearInterval","then","res","status","console","log","result","Code","undefined","storeName","StoreName","amount","Amount","currency","Currency","mesageModalClosed","setTimeout","showPendingPayment","react__WEBPACK_IMPORTED_MODULE_2___default","createElement","style","display","flexDirection","justifyContent","alignItems","flex","overflow","marginTop","fontSize","color","alcanceOrange","isNaN","black","marginBottom","textAlign","fontFamily","marginRight","_components_UI_FlashingButton_FlashingButton__WEBPACK_IMPORTED_MODULE_14__","clicked","e","label","C_Users_D_Documents_alcance_gitHubAlcance_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","alignSelf","backgroundColor","borderRadius","minHeight","fontWeight","textStyle","marginLeft","paddingLeft","paddingRight","react_device_detect__WEBPACK_IMPORTED_MODULE_12__","position","_components_UI_Modal_BdModal__WEBPACK_IMPORTED_MODULE_15__","id","show","modalClosed","mobileStyle","top","left","right","className","classes","alignContent","borderLeft","concat","qrcode_react__WEBPACK_IMPORTED_MODULE_11___default","value","axios"],"mappings":"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","file":"static/js/13.8261a2b1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"client__container__36ayv\",\"listItem\":\"client__listItem__3V61o\",\"span\":\"client__span__1SXnD\"};","import React, { useEffect, useState } from 'react';\nimport withErrorHandler from '../hoc/withErrorHandler/withErrorHandler';\nimport { connect } from 'react-redux';\nimport axios from '../axios-orders';\nimport * as a from '../store/actions/actionTypes';\nimport * as actions from '../store/actions/index';\nimport * as _ from 'lodash';\nimport { updateObject, checkValidity, color } from '../shared/utility';\nimport classes from './client.css';\nimport QRCode from 'qrcode.react';\nimport { BrowserView, MobileView, /* isBrowser, isMobile */ } from \"react-device-detect\";\nimport useWindowDimensions from '../hooks/useWindowsDimensions';\nimport FlashingButton from '../components/UI/FlashingButton/FlashingButton'; \nimport BdModal from '../components/UI/Modal/BdModal';\nconst UserTypeClient = props => {\n    const { height, width } = useWindowDimensions();\n    const { userType, userId } = props;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    //  useEffect(() => { props.onClientDetails(props.userId.toString()).then(res => { if (res.status === '501') { setBalance(0); } if (res.status === '200') { setBalance(res.data.result[0].Balance); }; }); props.onClientTList(props.userId).then(res => { if (res.status === '501') { setTransList([]); } if (res.status === '200') { const list = _.orderBy(res.data.result, 'Date', 'desc'); setTransList([...list]); } }); const interval = setInterval(() => { setCheckTime(Date.now()) }, 5000); return () => { clearInterval(interval) } }, []);\n    const [checkTime, setCheckTime] = useState();\n    const [stopChecking, setStopChecking] = useState(false);\n    const [pendingPayment, setPendingPayment] = useState(null);\n    const [openDialog, setOpenDialog] = useState(false);\n\n    useEffect(() => { const interval = setInterval(() => { setCheckTime(Date.now()) }, 5000); return () => { clearInterval(interval) } }, []);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => { if ((userType === 'client')) { pendingPayment && setOpenDialog(true); } }, [pendingPayment, userType]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => {\n        if ((userType === 'client') && (!stopChecking)) {\n            props.onGetPendingPayments(props.userToken).then(res => {\n                if (res.status === '200') {\n                    console.log('--props.onGetPendingPayments---------------');\n                    console.log(res);\n\n\n                    setStopChecking(true);\n\n                    if (res.data.result[0].Code != null || res.data.result[0].Code != undefined)\n                        setPendingPayment({\n                            storeName: res.data.result[0].StoreName,\n                            amount: res.data.result[0].Amount,\n                            currency: res.data.result[0].Currency || '',\n                            code: res.data.result[0].Code\n                        });\n                };\n\n            });\n        }\n    }, [checkTime, stopChecking]);\n \n\n    const aprovePaymentTransfer = (code) => {\n\n\n        if (!code) return;\n\n        props.onApprovePendingPayment(props.userToken, code).then(res => {\n            if (res.status === '200') {\n                console.log('---props.onApprovePendingPayment(code)-------------------------');\n                console.log(code);\n                console.log(res);\n                setOpenDialog(false); setTimeout(() => { setStopChecking(false) }, 5000);\n            };\n\n        });\n    }\n    const mesageModalClosed = () => {\n        setOpenDialog(false); setPendingPayment(null); setStopChecking(true);\n        setTimeout(() => { setStopChecking(false) }, 10000);\n    };\n\n    let showPendingPayment = <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', flex: 1, overflow: 'hidden', marginTop: '30px', }}>\n        <div style={{ display: 'flex', justifyContent: 'space-around', }}>\n            <label style={{ fontSize: '0.9rem', color: color.alcanceOrange, }}>{'SOLICITUD DE TRANSACCIÓN '}</label>\n        </div>\n        <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', marginTop: '20px' }}>\n\n\n            <p style={{ color: pendingPayment && !isNaN(+pendingPayment.amount) && (+pendingPayment.amount) > 0 ? 'blue' : color.black }} >\n                {'$ '}\n                <b style={{ color: pendingPayment && !isNaN(pendingPayment.amount) && (+pendingPayment.amount) > 0 ? 'green' : 'red' }}>\n                    {(pendingPayment && pendingPayment.amount) || 0}\n                </b>{' '}{pendingPayment && pendingPayment.currency}</p>\n            <p style={{ color: color.alcanceOrange }}>{' Comercio ID:'}<b style={{ color: color.black }} > {pendingPayment && pendingPayment.storeName !== null ? pendingPayment.storeName : '---'}\n            </b>\n            </p>\n            {/*    <Spinner /> */}\n        </div>\n        <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-around', alignItems: 'center', marginBottom: '20px' }}>\n            <div style={{ marginTop: '12px', marginBottom: '12px', fontSize: ' bold', textAlign: ' center', display: 'inline-block', fontFamily: 'AvenirBlack', height: '30%', marginRight: '10px' }}\n            >\n                <FlashingButton\n                    clicked={(e) => pendingPayment && aprovePaymentTransfer(pendingPayment.code)}\n                    label={'ACEPTAR'}\n                    style={{\n                        color: 'white', alignSelf: 'center', backgroundColor: '#f8bb48', borderRadius: '2px', minHeight: '20px', fontWeight: 'bold',\n                        textAlign: ' center',\n                        display: 'flex', flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', alignSelf: 'center',\n                    }}\n                    textStyle={{ fontSize: '12px' }}\n                />\n            </div>\n            <div style={{ marginTop: '12px', marginBottom: '12px', fontSize: ' bold', textAlign: ' center', display: 'inline-block', fontFamily: 'AvenirBlack', height: '30%', marginLeft: '10px' }}\n            >\n                <FlashingButton\n                    clicked={(e) => mesageModalClosed(e)}\n                    label={'RECHAZAR'}\n                    style={{\n                        color: 'white', alignSelf: 'center', backgroundColor: '#f8bb48', borderRadius: '2px', minHeight: '20px', fontWeight: 'bold',\n                        textAlign: ' center',\n                        display: 'flex', flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', alignSelf: 'center',\n                    }} textStyle={{ fontSize: '12px' }}\n                />\n            </div>\n        </div>\n\n    </div>;\n\n\n    return (<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', alignSelf: 'center', paddingLeft: '5%', paddingRight: '5%' }} >\n\n        <MobileView style={{ width: width, height: height, marginTop: '48px', position: 'relative' }}>\n            {openDialog && < div style={{ position: 'absolute', width: '100%', height: '100%', overflow: 'hidden' }}>\n                <BdModal id='showPendingPayment' show={openDialog} modalClosed={(e) => { mesageModalClosed(e) }}\n                    mobileStyle={{ top: '15%', left: '10%', right: '10%', width: undefined }}\n                >\n                    {showPendingPayment}\n                </BdModal>\n            </div>}\n\n            <div className={classes.container} style={{ display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', alignItems: 'stretch', }}>\n                < div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignContent: 'center', }}>\n                    <div style={{ marginBottom: '4%', borderLeft: `5px solid ${color.alcanceOrange}`, display: 'flex', flex: 1, flexDirection: 'row', justifyContent: 'flex-start', alignContent: 'center', }}>\n                        <label style={{ fontSize: '1.4rem', color: color.alcanceOrange, marginLeft: '10px' }}>{'Pago'}</label>\n                    </div>\n                    <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'center', alignItems: 'center', width: '100%', textAlign: 'left', marginTop: '70px' }}>\n                        <QRCode value={props.showUserInfo.Code} style={{ width: '200px', height: '200px' }} />\n                    </div>\n\n                </div>\n            </div>\n        </MobileView>\n\n        <BrowserView>\n            <p>UNDER CONSTRUCTION</p>\n        </BrowserView>\n\n\n    </div >);\n}\nconst mapStateToProps = state => {\n    return {\n        userType: state.auth.userType,\n        userToken: state.auth.userToken,\n        showUserInfo: state.al.showUserInfo,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n\n        onGetPendingPayments: (token) => dispatch(actions.getPendingPayments({ type: a.VEN_GET_PENDING_PAYMENTS, data: { in_Token: token, } })),\n        onApprovePendingPayment: (token, code) => dispatch(actions.approvePendingPayment({ type: a.VEN_APROVE_PAYMENT, data: { in_Token: token, in_Code: code } })),\n\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(UserTypeClient, axios));\n"],"sourceRoot":""}